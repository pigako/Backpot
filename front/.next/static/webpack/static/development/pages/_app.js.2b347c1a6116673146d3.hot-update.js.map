{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.2b347c1a6116673146d3.hot-update.js","sources":["webpack:///./reducers/user.js","webpack:///./sagas/book.js"],"sourcesContent":["import produce from 'immer';\r\n\r\nexport const initalState = {\r\n  isLoggingIn: false,\r\n  isLoggedIn: false,\r\n  loginErrorReason: '',\r\n  isLoggingOut: false,\r\n  isSignedUp: false,\r\n  isSigningUp: false,\r\n  signUpErrorReason: '',\r\n  me: null,\r\n  LikedBookList: [],\r\n  LikedWriterList: [],\r\n  otherUserInfo: null,\r\n};\r\n\r\nexport const LOG_IN_REQUEST = `LOG_IN_REQUEST`;\r\nexport const LOG_IN_SUCCESS = `LOG_IN_SUCCESS`;\r\nexport const LOG_IN_FAILURE = `LOG_IN_FAILURE`;\r\n\r\nexport const LOG_OUT_REQUEST = `LOG_OUT_REQUEST`;\r\nexport const LOG_OUT_SUCCESS = `LOG_OUT_SUCCESS`;\r\nexport const LOG_OUT_FAILURE = `LOG_OUT_FAILURE`;\r\n\r\nexport const SIGN_UP_REQUEST = `SIGN_UP_REQUEST`;\r\nexport const SIGN_UP_SUCCESS = `SIGN_UP_SUCCESS`;\r\nexport const SIGN_UP_FAILURE = `SIGN_UP_FAILURE`;\r\n\r\nexport const LOAD_USER_REQUEST = `LOAD_USER_REQUEST`;\r\nexport const LOAD_USER_SUCCESS = `LOAD_USER_SUCCESS`;\r\nexport const LOAD_USER_FAILURE = `LOAD_USER_FAILURE`;\r\n\r\nexport const ADD_LIKEBOOKLIST = `ADD_LIKEBOOKLIST`;\r\n\r\nconst reducer = (state = initalState, action) => {\r\n  return produce(state, draft => {\r\n    switch (action.type) {\r\n      // 로그인\r\n      case LOG_IN_REQUEST: {\r\n        draft.isLoggingIn = true;\r\n        draft.isLoggedIn = false;\r\n        draft.loginErrorReason = '';\r\n        break;\r\n      }\r\n      case LOG_IN_SUCCESS: {\r\n        draft.isLoggingIn = false;\r\n        draft.isLoggedIn = true;\r\n        draft.me = action.data;\r\n        break;\r\n      }\r\n      case LOG_IN_FAILURE: {\r\n        draft.isLoggingIn = false;\r\n        draft.loginErrorReason = action.error;\r\n        break;\r\n      }\r\n      // 로그아웃\r\n      case LOG_OUT_REQUEST: {\r\n        draft.isLoggingOut = true;\r\n        break;\r\n      }\r\n      case LOG_OUT_SUCCESS: {\r\n        draft.isLoggingOut = false;\r\n        draft.isLoggedIn = false;\r\n        draft.me = null;\r\n        break;\r\n      }\r\n      case LOG_OUT_FAILURE: {\r\n        draft.isLoggingOut = false;\r\n        break;\r\n      }\r\n      // 회원가입\r\n      case SIGN_UP_REQUEST: {\r\n        draft.isSigningUp = true;\r\n        draft.signUpErrorReason = '';\r\n        break;\r\n      }\r\n      case SIGN_UP_SUCCESS: {\r\n        draft.isSigningUp = false;\r\n        draft.isSignedUp = true;\r\n        break;\r\n      }\r\n      case SIGN_UP_FAILURE: {\r\n        draft.isSigningUp = false;\r\n        draft.signUpErrorReason = action.error;\r\n        break;\r\n      }\r\n      // 유저 정보 불러오기\r\n      case LOAD_USER_REQUEST: {\r\n        if (action.data) {\r\n          draft.otherUserInfo = null;\r\n        }\r\n        break;\r\n      }\r\n      case LOAD_USER_SUCCESS: {\r\n        if (action.me) {\r\n          draft.me = action.data;\r\n        }\r\n        if (!action.me) {\r\n          draft.otherUserInfo = action.data;\r\n        }\r\n        break;\r\n      }\r\n      case LOAD_USER_FAILURE: {\r\n        break;\r\n      }\r\n      // 선호작 리스트 추가\r\n      case ADD_LIKEBOOKLIST: {\r\n        break;\r\n      }\r\n      default: {\r\n        break;\r\n      }\r\n    }\r\n  });\r\n};\r\nexport default reducer;\r\n","import { all, call, fork, throttle, takeLatest, put } from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport {\r\n  LOAD_BOOKS_REQUEST,\r\n  LOAD_BOOKS_SUCCESS,\r\n  LOAD_BOOKS_FAILURE,\r\n  LOAD_BOOK_REQUEST,\r\n  LOAD_BOOK_SUCCESS,\r\n  LOAD_BOOK_FAILURE,\r\n  ADD_LIKEBOOK_REQUEST,\r\n  ADD_LIKEBOOK_SUCCESS,\r\n  ADD_LIKEBOOK_FAILURE,\r\n  REMOVE_LIKEBOOK_REQUEST,\r\n  REMOVE_LIKEBOOK_SUCCESS,\r\n  REMOVE_LIKEBOOK_FAILURE,\r\n} from '../reducers/book';\r\nimport { ADD_LIKEBOOKLIST } from '../reducers/user';\r\n\r\n// 전체 연재글 가져오기\r\nfunction* watchLoadBooks() {\r\n  yield throttle(1000, LOAD_BOOKS_REQUEST, function* loadBooks(action) {\r\n    try {\r\n      const result = yield call((lastId = 0, limit = 20) => {\r\n        return axios.get(`/books?lastId=${lastId}&limit=${limit}`);\r\n      }, action.lastId);\r\n      yield put({\r\n        type: LOAD_BOOKS_SUCCESS,\r\n        data: result.data,\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      yield put({\r\n        type: LOAD_BOOKS_FAILURE,\r\n        error: e,\r\n      });\r\n    }\r\n  });\r\n}\r\n// 게시글 하나 조회\r\nfunction* watchLoadBook() {\r\n  yield takeLatest(LOAD_BOOK_REQUEST, function* loadBook(action) {\r\n    try {\r\n      const result = yield call(bookId => {\r\n        return axios.get(`/book/${bookId}`);\r\n      }, action.id);\r\n      yield put({\r\n        type: LOAD_BOOK_SUCCESS,\r\n        data: result.data,\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      put({\r\n        type: LOAD_BOOK_FAILURE,\r\n        error: e,\r\n      });\r\n    }\r\n  });\r\n}\r\n// 선호작 추가\r\nfunction* watchAddLikebook() {\r\n  yield takeLatest(ADD_LIKEBOOK_REQUEST, function* addLikebook(action) {\r\n    try {\r\n      const result = yield call(bookId => {\r\n        return axios.post(\r\n          `/book/${bookId}/like`,\r\n          {},\r\n          {\r\n            withCredentials: true,\r\n          },\r\n        );\r\n      }, action.bookId);\r\n      yield put({\r\n        type: ADD_LIKEBOOK_SUCCESS,\r\n        data: result.data,\r\n      });\r\n      yield put({\r\n        type: ADD_LIKEBOOKLIST,\r\n        data: {\r\n          id: result.data,\r\n          ...action.data,\r\n        },\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      yield put({\r\n        type: ADD_LIKEBOOK_FAILURE,\r\n        error: e,\r\n      });\r\n    }\r\n  });\r\n}\r\n// 선호작 해제\r\nfunction* watchRemoveLikebook() {}\r\nexport default function* bookSaga() {\r\n  yield all([\r\n    fork(watchLoadBooks),\r\n    fork(watchLoadBook),\r\n    fork(watchAddLikebook),\r\n    fork(watchRemoveLikebook),\r\n  ]);\r\n}\r\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAcA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AA3EA;AA6EA;AACA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChGA;;;AAoBA;;;AAoBA;;;AAiCA;;;AACA;AACA;AA9FA;AACA;AACA;AAcA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AALA;AAEA;AAFA;AAKA;AACA;AACA;AAFA;AACA;AANA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAUA;AAVA;AAWA;AACA;AACA;AAFA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AALA;AAEA;AAFA;AAKA;AACA;AACA;AAFA;AACA;AANA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AAFA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAIA;AADA;AAIA;AACA;AAXA;AAEA;AAFA;AAWA;AACA;AACA;AAFA;AACA;AAZA;AAAA;AAeA;AACA;AACA;AACA;AADA;AAFA;AACA;AAhBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAuBA;AAvBA;AAwBA;AACA;AACA;AAFA;AACA;AAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AA+BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}