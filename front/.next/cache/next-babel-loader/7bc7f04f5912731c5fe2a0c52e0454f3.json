{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchLoadBooks),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchLoadBook),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(bookSaga);\n\nimport { all, call, fork, throttle, takeLatest, put } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { LOAD_BOOKS_REQUEST, LOAD_BOOKS_SUCCESS, LOAD_BOOKS_FAILURE, LOAD_BOOK_REQUEST, LOAD_BOOK_SUCCESS, LOAD_BOOK_FAILURE } from '../reducers/book'; // 전체 연재글 가져오기\n\nfunction watchLoadBooks() {\n  return _regeneratorRuntime.wrap(function watchLoadBooks$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return throttle(1000, LOAD_BOOKS_REQUEST,\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function loadBooks(action) {\n            var result;\n            return _regeneratorRuntime.wrap(function loadBooks$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    _context.next = 3;\n                    return call(function () {\n                      var lastId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                      var limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;\n                      return axios.get(\"/books?lastId=\".concat(lastId, \"&limit=\").concat(limit));\n                    }, action.lastId);\n\n                  case 3:\n                    result = _context.sent;\n                    _context.next = 6;\n                    return put({\n                      type: LOAD_BOOKS_SUCCESS,\n                      data: result.data\n                    });\n\n                  case 6:\n                    _context.next = 13;\n                    break;\n\n                  case 8:\n                    _context.prev = 8;\n                    _context.t0 = _context[\"catch\"](0);\n                    console.log(_context.t0);\n                    _context.next = 13;\n                    return put({\n                      type: LOAD_BOOKS_FAILURE,\n                      error: _context.t0\n                    });\n\n                  case 13:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, loadBooks, null, [[0, 8]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked);\n} // 게시글 하나 조회\n\n\nfunction watchLoadBook() {\n  return _regeneratorRuntime.wrap(function watchLoadBook$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return takeLatest(LOAD_BOOK_REQUEST,\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function loadBook(action) {\n            var result;\n            return _regeneratorRuntime.wrap(function loadBook$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.prev = 0;\n                    _context3.next = 3;\n                    return call(function (bookId) {\n                      return axios.get(\"/book/\".concat(bookId));\n                    }, action.id);\n\n                  case 3:\n                    result = _context3.sent;\n                    _context3.next = 6;\n                    return put({\n                      type: LOAD_BOOK_SUCCESS,\n                      data: result.data\n                    });\n\n                  case 6:\n                    _context3.next = 12;\n                    break;\n\n                  case 8:\n                    _context3.prev = 8;\n                    _context3.t0 = _context3[\"catch\"](0);\n                    console.log(_context3.t0);\n                    put({\n                      type: LOAD_BOOK_FAILURE,\n                      error: _context3.t0\n                    });\n\n                  case 12:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, loadBook, null, [[0, 8]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked2);\n}\n\nexport default function bookSaga() {\n  return _regeneratorRuntime.wrap(function bookSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return all([fork(watchLoadBooks), fork(watchLoadBook)]);\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked3);\n}","map":{"version":3,"sources":["C:/Document/Backpot/front/sagas/book.js"],"names":["watchLoadBooks","watchLoadBook","bookSaga","all","call","fork","throttle","takeLatest","put","axios","LOAD_BOOKS_REQUEST","LOAD_BOOKS_SUCCESS","LOAD_BOOKS_FAILURE","LOAD_BOOK_REQUEST","LOAD_BOOK_SUCCESS","LOAD_BOOK_FAILURE","loadBooks","action","lastId","limit","get","result","type","data","console","log","error","loadBook","bookId","id"],"mappings":";;;;yBAYUA,c;;;yBAoBAC,a;;;yBAoBeC,Q;;AApDzB,SAASC,GAAT,EAAcC,IAAd,EAAoBC,IAApB,EAA0BC,QAA1B,EAAoCC,UAApC,EAAgDC,GAAhD,QAA2D,oBAA3D;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,kBADF,EAEEC,kBAFF,EAGEC,kBAHF,EAIEC,iBAJF,EAKEC,iBALF,EAMEC,iBANF,QAOO,kBAPP,C,CASA;;AACA,SAAUf,cAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,iBAAMM,QAAQ,CAAC,IAAD,EAAOI,kBAAP;AAAA;AAAA,mCAA2B,SAAUM,SAAV,CAAoBC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtB,2BAAMb,IAAI,CAAC,YAA4B;AAAA,0BAA3Bc,MAA2B,uEAAlB,CAAkB;AAAA,0BAAfC,KAAe,uEAAP,EAAO;AACpD,6BAAOV,KAAK,CAACW,GAAN,yBAA2BF,MAA3B,oBAA2CC,KAA3C,EAAP;AACD,qBAFwB,EAEtBF,MAAM,CAACC,MAFe,CAAV;;AAFsB;AAE/BG,oBAAAA,MAF+B;AAAA;AAKrC,2BAAMb,GAAG,CAAC;AACRc,sBAAAA,IAAI,EAAEX,kBADE;AAERY,sBAAAA,IAAI,EAAEF,MAAM,CAACE;AAFL,qBAAD,CAAT;;AALqC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAUrCC,oBAAAA,OAAO,CAACC,GAAR;AAVqC;AAWrC,2BAAMjB,GAAG,CAAC;AACRc,sBAAAA,IAAI,EAAEV,kBADE;AAERc,sBAAAA,KAAK;AAFG,qBAAD,CAAT;;AAXqC;AAAA;AAAA;AAAA;AAAA;AAAA,eAAUV,SAAV;AAAA,WAA3B,EAAd;;AADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C,CAmBA;;;AACA,SAAUf,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,iBAAMM,UAAU,CAACM,iBAAD;AAAA;AAAA,mCAAoB,SAAUc,QAAV,CAAmBV,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjB,2BAAMb,IAAI,CAAC,UAAAwB,MAAM,EAAI;AAClC,6BAAOnB,KAAK,CAACW,GAAN,iBAAmBQ,MAAnB,EAAP;AACD,qBAFwB,EAEtBX,MAAM,CAACY,EAFe,CAAV;;AAFiB;AAE1BR,oBAAAA,MAF0B;AAAA;AAKhC,2BAAMb,GAAG,CAAC;AACRc,sBAAAA,IAAI,EAAER,iBADE;AAERS,sBAAAA,IAAI,EAAEF,MAAM,CAACE;AAFL,qBAAD,CAAT;;AALgC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAUhCC,oBAAAA,OAAO,CAACC,GAAR;AACAjB,oBAAAA,GAAG,CAAC;AACFc,sBAAAA,IAAI,EAAEP,iBADJ;AAEFW,sBAAAA,KAAK;AAFH,qBAAD,CAAH;;AAXgC;AAAA;AAAA;AAAA;AAAA;AAAA,eAAUC,QAAV;AAAA,WAApB,EAAhB;;AADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAoBA,eAAe,SAAUzB,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,iBAAMC,GAAG,CAAC,CAACE,IAAI,CAACL,cAAD,CAAL,EAAuBK,IAAI,CAACJ,aAAD,CAA3B,CAAD,CAAT;;AADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { all, call, fork, throttle, takeLatest, put } from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport {\r\n  LOAD_BOOKS_REQUEST,\r\n  LOAD_BOOKS_SUCCESS,\r\n  LOAD_BOOKS_FAILURE,\r\n  LOAD_BOOK_REQUEST,\r\n  LOAD_BOOK_SUCCESS,\r\n  LOAD_BOOK_FAILURE,\r\n} from '../reducers/book';\r\n\r\n// 전체 연재글 가져오기\r\nfunction* watchLoadBooks() {\r\n  yield throttle(1000, LOAD_BOOKS_REQUEST, function* loadBooks(action) {\r\n    try {\r\n      const result = yield call((lastId = 0, limit = 20) => {\r\n        return axios.get(`/books?lastId=${lastId}&limit=${limit}`);\r\n      }, action.lastId);\r\n      yield put({\r\n        type: LOAD_BOOKS_SUCCESS,\r\n        data: result.data,\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      yield put({\r\n        type: LOAD_BOOKS_FAILURE,\r\n        error: e,\r\n      });\r\n    }\r\n  });\r\n}\r\n// 게시글 하나 조회\r\nfunction* watchLoadBook() {\r\n  yield takeLatest(LOAD_BOOK_REQUEST, function* loadBook(action) {\r\n    try {\r\n      const result = yield call(bookId => {\r\n        return axios.get(`/book/${bookId}`);\r\n      }, action.id);\r\n      yield put({\r\n        type: LOAD_BOOK_SUCCESS,\r\n        data: result.data,\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      put({\r\n        type: LOAD_BOOK_FAILURE,\r\n        error: e,\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nexport default function* bookSaga() {\r\n  yield all([fork(watchLoadBooks), fork(watchLoadBook)]);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}