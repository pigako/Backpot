{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback, useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport moment from 'moment';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { DELETE_COMMENT_REQUEST, UPDATE_COMMENT_REQUEST } from '../reducers/board';\nvar SCommentCard = styled.div.withConfig({\n  displayName: \"CommentCard__SCommentCard\",\n  componentId: \"sc-1fhrn1i-0\"\n})([\"margin:1.5rem;\"]);\nvar CommentCardTop = styled.div.withConfig({\n  displayName: \"CommentCard__CommentCardTop\",\n  componentId: \"sc-1fhrn1i-1\"\n})([\"height:2rem;background:#f7f7f7;border-bottom:solid 1px #6441a5;display:inline-block;width:100%;font-size:1rem;& > label{line-height:2rem;}\"]);\nvar CommentCardNickname = styled.label.withConfig({\n  displayName: \"CommentCard__CommentCardNickname\",\n  componentId: \"sc-1fhrn1i-2\"\n})([\"font-weight:bold;margin-left:1rem;\"]);\nvar CommentCardCreateLabel = styled.label.withConfig({\n  displayName: \"CommentCard__CommentCardCreateLabel\",\n  componentId: \"sc-1fhrn1i-3\"\n})([\"display:block;float:right;\"]);\nvar CommentUpDelButtonDiv = styled.div.withConfig({\n  displayName: \"CommentCard__CommentUpDelButtonDiv\",\n  componentId: \"sc-1fhrn1i-4\"\n})([\"font-size:1rem;display:inline-block;float:right;margin-right:1rem;line-height:2rem;& > a{margin-left:10px;margin-right:10px;cursor:pointer;&:hover{color:#148cff;}}\"]);\nvar CommentCardContent = styled.div.withConfig({\n  displayName: \"CommentCard__CommentCardContent\",\n  componentId: \"sc-1fhrn1i-5\"\n})([\"margin:1.5rem;& > div{font-size:1rem;line-height:1.5rem;}\"]);\n\nvar CommentCard = function CommentCard(_ref) {\n  var comment = _ref.comment;\n\n  var _ref2 = useSelector(function (state) {\n    return state.user.me;\n  }) || false,\n      myId = _ref2.id;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      isUpdatingComment = _useState[0],\n      setIsUpdatingComment = _useState[1];\n\n  var _useState2 = useState(''),\n      updateCommentText = _useState2[0],\n      setUpdateCommentText = _useState2[1];\n\n  var editorRef = useRef();\n\n  var _ref3 = editorRef.current || {},\n      CKEditor = _ref3.CKEditor,\n      ClassicEditor = _ref3.ClassicEditor;\n\n  var _useState3 = useState(false),\n      editorLoded = _useState3[0],\n      setEditorLoded = _useState3[1];\n\n  useEffect(function () {\n    editorRef.current = {\n      CKEditor: require('@ckeditor/ckeditor5-react'),\n      ClassicEditor: require('@ckeditor/ckeditor5-build-classic')\n    };\n    setEditorLoded(true);\n  }, []);\n  var onUpdateComment = useCallback(function (e) {\n    if (isUpdatingComment) {\n      dispatch({\n        type: UPDATE_COMMENT_REQUEST,\n        data: {\n          id: comment.id,\n          conetnt: updateCommentText\n        }\n      });\n      setIsUpdatingComment(false);\n    } else {\n      setIsUpdatingComment(true);\n    }\n  }, [isUpdatingComment]);\n  var onUpdateCommentCancle = useCallback(function (e) {\n    setIsUpdatingComment(false);\n    setUpdateCommentText(comment.content);\n  }, [comment && comment.content]);\n  var onDeleteComment = useCallback(function (e) {\n    console.log('CommentCard', comment.id);\n    dispatch({\n      type: DELETE_COMMENT_REQUEST,\n      commentId: comment.id\n    });\n  }, [comment && comment.id]);\n  return __jsx(SCommentCard, {\n    key: +comment.id\n  }, __jsx(CommentCardTop, null, __jsx(CommentCardNickname, null, comment.User.nickname), __jsx(CommentCardCreateLabel, null, moment(comment.createdAt).format('YY.MM.DD HH시 mm분')), myId === comment.User.id ? __jsx(CommentUpDelButtonDiv, null, isUpdatingComment ? __jsx(\"a\", {\n    onClick: onUpdateCommentCancle\n  }, \"\\uCDE8\\uC18C\") : null, __jsx(\"a\", {\n    onClick: onUpdateComment\n  }, \"\\uC218\\uC815\"), __jsx(\"a\", {\n    onClick: onDeleteComment\n  }, \"\\uC0AD\\uC81C\")) : null), __jsx(CommentCardContent, null, isUpdatingComment ? editorLoded ? __jsx(CKEditor, {\n    key: 'board',\n    editor: ClassicEditor,\n    data: comment && comment.content,\n    onChange: function onChange(event, editor) {\n      var data = editor.getData();\n      setUpdateCommentText(data);\n    }\n  }) : __jsx(\"p\", null, \"Editor Loding\") : __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: comment.content\n    }\n  })));\n};\n\nCommentCard.propTypes = {\n  comment: PropTypes.object.isRequired\n};\nexport default CommentCard;","map":{"version":3,"sources":["C:/Document/Backpot/front/components/CommentCard.js"],"names":["React","useCallback","useState","useRef","useEffect","PropTypes","styled","moment","useSelector","useDispatch","DELETE_COMMENT_REQUEST","UPDATE_COMMENT_REQUEST","SCommentCard","div","CommentCardTop","CommentCardNickname","label","CommentCardCreateLabel","CommentUpDelButtonDiv","CommentCardContent","CommentCard","comment","state","user","me","myId","id","dispatch","isUpdatingComment","setIsUpdatingComment","updateCommentText","setUpdateCommentText","editorRef","current","CKEditor","ClassicEditor","editorLoded","setEditorLoded","require","onUpdateComment","e","type","data","conetnt","onUpdateCommentCancle","content","onDeleteComment","console","log","commentId","User","nickname","createdAt","format","event","editor","getData","__html","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport moment from 'moment';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport {\r\n  DELETE_COMMENT_REQUEST,\r\n  UPDATE_COMMENT_REQUEST,\r\n} from '../reducers/board';\r\n\r\nconst SCommentCard = styled.div`\r\n  margin: 1.5rem;\r\n`;\r\nconst CommentCardTop = styled.div`\r\n  height: 2rem;\r\n  background: #f7f7f7;\r\n  border-bottom: solid 1px #6441a5;\r\n  display: inline-block;\r\n  width: 100%;\r\n  font-size: 1rem;\r\n\r\n  & > label {\r\n    line-height: 2rem;\r\n  }\r\n`;\r\nconst CommentCardNickname = styled.label`\r\n  font-weight: bold;\r\n  margin-left: 1rem;\r\n`;\r\nconst CommentCardCreateLabel = styled.label`\r\n  display: block;\r\n  float: right;\r\n`;\r\nconst CommentUpDelButtonDiv = styled.div`\r\n  font-size: 1rem;\r\n  display: inline-block;\r\n  float: right;\r\n  margin-right: 1rem;\r\n  line-height: 2rem;\r\n\r\n  & > a {\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      color: #148cff;\r\n    }\r\n  }\r\n`;\r\nconst CommentCardContent = styled.div`\r\n  margin: 1.5rem;\r\n  & > div {\r\n    font-size: 1rem;\r\n    line-height: 1.5rem;\r\n  }\r\n`;\r\n\r\nconst CommentCard = ({ comment }) => {\r\n  const { id: myId } = useSelector(state => state.user.me) || false;\r\n  const dispatch = useDispatch();\r\n\r\n  const [isUpdatingComment, setIsUpdatingComment] = useState(false);\r\n  const [updateCommentText, setUpdateCommentText] = useState('');\r\n\r\n  const editorRef = useRef();\r\n  const { CKEditor, ClassicEditor } = editorRef.current || {};\r\n  const [editorLoded, setEditorLoded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    editorRef.current = {\r\n      CKEditor: require('@ckeditor/ckeditor5-react'),\r\n      ClassicEditor: require('@ckeditor/ckeditor5-build-classic'),\r\n    };\r\n    setEditorLoded(true);\r\n  }, []);\r\n\r\n  const onUpdateComment = useCallback(\r\n    e => {\r\n      if (isUpdatingComment) {\r\n        dispatch({\r\n          type: UPDATE_COMMENT_REQUEST,\r\n          data: {\r\n            id: comment.id,\r\n            conetnt: updateCommentText,\r\n          },\r\n        });\r\n        setIsUpdatingComment(false);\r\n      } else {\r\n        setIsUpdatingComment(true);\r\n      }\r\n    },\r\n    [isUpdatingComment],\r\n  );\r\n\r\n  const onUpdateCommentCancle = useCallback(\r\n    e => {\r\n      setIsUpdatingComment(false);\r\n      setUpdateCommentText(comment.content);\r\n    },\r\n    [comment && comment.content],\r\n  );\r\n\r\n  const onDeleteComment = useCallback(\r\n    e => {\r\n      console.log('CommentCard', comment.id);\r\n      dispatch({\r\n        type: DELETE_COMMENT_REQUEST,\r\n        commentId: comment.id,\r\n      });\r\n    },\r\n    [comment && comment.id],\r\n  );\r\n\r\n  return (\r\n    <SCommentCard key={+comment.id}>\r\n      <CommentCardTop>\r\n        <CommentCardNickname>{comment.User.nickname}</CommentCardNickname>\r\n        <CommentCardCreateLabel>\r\n          {moment(comment.createdAt).format('YY.MM.DD HH시 mm분')}\r\n        </CommentCardCreateLabel>\r\n        {myId === comment.User.id ? (\r\n          <CommentUpDelButtonDiv>\r\n            {isUpdatingComment ? (\r\n              <a onClick={onUpdateCommentCancle}>취소</a>\r\n            ) : null}\r\n            <a onClick={onUpdateComment}>수정</a>\r\n            <a onClick={onDeleteComment}>삭제</a>\r\n          </CommentUpDelButtonDiv>\r\n        ) : null}\r\n      </CommentCardTop>\r\n      <CommentCardContent>\r\n        {isUpdatingComment ? (\r\n          editorLoded ? (\r\n            <CKEditor\r\n              key={'board'}\r\n              editor={ClassicEditor}\r\n              data={comment && comment.content}\r\n              onChange={(event, editor) => {\r\n                const data = editor.getData();\r\n                setUpdateCommentText(data);\r\n              }}\r\n            />\r\n          ) : (\r\n            <p>Editor Loding</p>\r\n          )\r\n        ) : (\r\n          <div dangerouslySetInnerHTML={{ __html: comment.content }}></div>\r\n        )}\r\n      </CommentCardContent>\r\n    </SCommentCard>\r\n  );\r\n};\r\n\r\nCommentCard.propTypes = {\r\n  comment: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default CommentCard;\r\n"]},"metadata":{},"sourceType":"module"}